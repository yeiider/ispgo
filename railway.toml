[build]
    builder = "nixpacks"
[build]
    buildCommand = """
    composer install --no-dev --optimize-autoloader
    npm install
    npm run build
    php artisan migrate --force || echo 'No migrations to run.'
    php artisan config:cache
    php artisan route:cache
    php artisan view:cache
    """

[deploy]
    startCommand = "php artisan serve --host=0.0.0.0 --port=${PORT}"

[env]
    NIXPACKS_PHP_VERSION = "8.2"
    NIXPACKS_NODE_VERSION = "18"
    NIXPACKS_NPM_VERSION = "9"
    NIXPACKS_PHP_EXTENSIONS = "pdo_pgsql"
    NIXPACKS_PKGS = "postgresqlClient"

