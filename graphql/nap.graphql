"Arbitrary JSON object."
scalar JSON @scalar(class: "Nuwave\\Lighthouse\\Schema\\Types\\Scalars\\Json")

type NapBox {
  id: ID!
  name: String!
  code: String
  address: String
  latitude: Float
  longitude: Float
  status: String
  capacity: Int
  technology_type: String
  installation_date: String
  brand: String
  model: String
  distribution_order: Int
  parent_nap_id: ID
  router_id: ID
  fiber_color: String
  ports: [NapPort!] @hasMany(relation: "ports")
  available_ports_count: Int
  # Servicios relacionados a esta caja (a trav√©s de sus puertos)
  services: [Service!]! @field(resolver: "App\\GraphQL\\Queries\\NapQuery@napBoxServices")
}

type NapBoxPaginator {
  data: [NapBox!]!
  paginatorInfo: PaginatorInfo!
}

type PaginatorInfo {
  count: Int!
  currentPage: Int!
  firstItem: Int
  hasMorePages: Boolean!
  lastItem: Int
  lastPage: Int!
  perPage: Int!
  total: Int!
}

type NapPort {
  id: ID!
  nap_box_id: ID!
  port_number: Int!
  port_name: String
  status: String
  connection_type: String
  service_id: ID
  code: String
  color: String
  last_signal_check: String
  signal_strength: Float
  port_config: JSON
  notes: String
  technician_notes: String
  last_maintenance: String
  warranty_until: String
  # Relaciones
  service: Service @belongsTo(relation: "service")
  napBox: NapBox @belongsTo(relation: "napBox")
}

input CreateNapBoxInput {
  name: String!
  code: String!
  address: String
  latitude: Float
  longitude: Float
  status: String
  capacity: Int
  technology_type: String
  installation_date: String
  brand: String
  model: String
  distribution_order: Int
  parent_nap_id: ID
  router_id: ID
  fiber_color: String
}

input UpdateNapBoxInput {
  name: String
  code: String
  address: String
  latitude: Float
  longitude: Float
  status: String
  capacity: Int
  technology_type: String
  installation_date: String
  brand: String
  model: String
  distribution_order: Int
  parent_nap_id: ID
  router_id: ID
  fiber_color: String
}

input CreateNapPortInput {
  nap_box_id: ID!
  port_number: Int!
  port_name: String
  status: String
  connection_type: String
  service_id: ID
  code: String
  color: String
  last_signal_check: String
  signal_strength: Float
  port_config: JSON
  notes: String
  technician_notes: String
  last_maintenance: String
  warranty_until: String
}

input UpdateNapPortInput {
  port_name: String
  status: String
  connection_type: String
  service_id: ID
  code: String
  color: String
  last_signal_check: String
  signal_strength: Float
  port_config: JSON
  notes: String
  technician_notes: String
  last_maintenance: String
  warranty_until: String
}

extend type Query {
  napBoxes(router_id: ID, first: Int = 15, page: Int): NapBoxPaginator @field(resolver: "App\\GraphQL\\Queries\\NapQuery@napBoxes")
  napBox(id: ID!): NapBox @field(resolver: "App\\GraphQL\\Queries\\NapQuery@napBox")
  napPorts(nap_box_id: ID!): [NapPort!]! @field(resolver: "App\\GraphQL\\Queries\\NapQuery@napPorts")
  napPort(id: ID!): NapPort @field(resolver: "App\\GraphQL\\Queries\\NapQuery@napPort")
  availableNapPorts(nap_box_id: ID!): [NapPort!]! @field(resolver: "App\\GraphQL\\Queries\\NapQuery@availableNapPorts")
  napBoxServices(nap_box_id: ID!): [Service!]! @field(resolver: "App\\GraphQL\\Queries\\NapQuery@napBoxServices")
  nearbyNapBoxes(latitude: Float!, longitude: Float!, radius: Int = 500): [NapBox!]! @field(resolver: "App\\GraphQL\\Queries\\NapQuery@nearbyNapBoxes")
}

extend type Mutation {
  createNapBox(input: CreateNapBoxInput!): NapBox @field(resolver: "App\\GraphQL\\Mutations\\NapMutation@createNapBox")
  updateNapBox(id: ID!, input: UpdateNapBoxInput!): NapBox @field(resolver: "App\\GraphQL\\Mutations\\NapMutation@updateNapBox")
  createNapPort(input: CreateNapPortInput!): NapPort @field(resolver: "App\\GraphQL\\Mutations\\NapMutation@createNapPort")
  updateNapPort(id: ID!, input: UpdateNapPortInput!): NapPort @field(resolver: "App\\GraphQL\\Mutations\\NapMutation@updateNapPort")
  assignServiceToNapPort(service_id: ID!, nap_port_id: ID!): NapPort @field(resolver: "App\\GraphQL\\Mutations\\NapMutation@assignServiceToNapPort")
  releaseNapPort(nap_port_id: ID!): NapPort @field(resolver: "App\\GraphQL\\Mutations\\NapMutation@releaseNapPort")
  assignRouterToNapBox(nap_box_id: ID!, router_id: ID!): NapBox @field(resolver: "App\\GraphQL\\Mutations\\NapMutation@assignRouterToNapBox")
}
